<br />
<%= label :doctor, "Doctor"%><br />

<%= select :appointment, :doctor_id, options_for_select(@doctors.map {|c| [c.first_name+' '+c.last_name,c.id]}),{:prompt => 'Select a doctor',:onchange => "update_slots();"}%>

<script type="text/javascript">
function update_slots() {
      doc_id = document.getElementById("appointment_doctor_id").value;
      date= document.getElementById("appointment_appointment_date_1i").value +"-"+parseInt(document.getElementById("appointment_appointment_date_2i").value).toPaddedString(2) + '-' + parseInt(document.getElementById("appointment_appointment_date_2i").value).toPaddedString(2)
      if(doc_id != "" && date.length == 10){
        jQuery.get('/appointments/update_slots', {id: doc_id, date:date}, function () { });
      }
      
      
  }
</script>
